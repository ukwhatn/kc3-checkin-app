<% content_for(:title, "マイページ") %>

<div class="container-fluid mt-3">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="col-12 text-center">
        <div>
          QRコード
        </div>
        <div class="my-2" style="font-size: 75%">
          このコードをスタッフに提示してください
        </div>
        <%= image_tag @current_user.qr_code, class: "w-100 p-3", style: "max-width: 300px" %>
      </div>
    </div>
  </div>

  <div class="row justify-content-center mt-5 mb-3">
    <div class="col-md-6">
      <div class="col-12 text-center">
        <div class="fs-5">
          これまでに出席したイベント
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center">
    <div class="col-md-4">
      <div class="col-12 text-center">
        <% @attended_events.each do |event, timetables| %>
          <div class="p-2 bg-dark text-white text-start fs-5">
            <%= event.name %>
          </div>

          <% timetables.each do |timetable, contents| %>
            <div class="p-2 bg-white rounded-3 text-dark text-start fs-6 my-2">
              <div style="font-size: 105%">
                <%= timetable.name %>
              </div>
              <div style="font-size: 90%">
                <%= timetable.start_at.strftime("%Y/%m/%d %H:%M") %> 〜 <%= timetable.end_at.strftime("%H:%M") %>
              </div>
              <ul class="mt-3" style="font-size: 90%">
                <% contents.each do |content| %>
                  <li>
                    <%= content.name %>
                  </li>
                <% end %>
              </ul>
            </div>
          <% end %>

        <% end %>
      </div>
    </div>
  </div>
</div>